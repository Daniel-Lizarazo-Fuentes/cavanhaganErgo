<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Inter"
    />
    <style>
      .container {
        font-family: "Inter", "Roboto";
        background-color: #f4f4f6;
        box-shadow: inset 1px 1px 2px #2e3138;
        border-radius: 12px;
        text-align: center;
        display: flex;
        justify-content: center;
      }
      .container .fake {
        width: 5px;
        height: 5px;
      }
      .container .itemsContainer {
        padding: 16px;
      }
      .container .itemsContainer h2 {
        color: #2e3138;
        font-size: 32px;
        margin: 0;
      }
      .container .itemsContainer .form {
        padding: 16px;
      }
      .container .itemsContainer .form form {
        width: 100%;
        max-width: 800px;
        display: flex;
        flex-direction: column;
      }
      .container .itemsContainer .form form div label {
        margin: 5px;
        display: flex;
        justify-content: left;
      }
      .container .itemsContainer .form form div label input {
        max-width: 50px;
        margin: 0;
      }
      .container .itemsContainer .form form label {
        margin: 10px 0 3px 0;
        text-align: left;
        color: #52667a;
        font-weight: 500;
      }
      .container .itemsContainer .form form input {
        border-radius: 5px;
        margin: 0 0 12px 0;
        padding: 16px;
        max-width: 600px;
        width: 100%;
        border: 1px solid #c2ccd6;
      }
      .container .itemsContainer .form form input::placeholder {
        font-family: "Inter", "Arial";
        font-size: 16px;
      }
      .container .itemsContainer .form .submit {
        font-size: 20px;
        border: none;
        background-color: #1a5ee6;
        color: white;
        border-radius: 7px;
        padding: 10px 35px;
        box-shadow: inset 0 1px 3px #759ef0;
      }

      p {
        color: hsl(220, 10%, 45%);
      }
    </style>
    <script language="JavaScript">
      function calculate() {
        //get all values from the form and make them floats (kind of number)
        let age = parseFloat(document.getElementById("user_Age").value);
        let weight = parseFloat(document.getElementById("user_Height").value);
        let height = parseFloat(document.getElementById("user_Weight").value);
        let arm_span = parseFloat(document.getElementById("arm_span").value);
        let leg_lenght = parseFloat(
          document.getElementById("leg_lenght").value
        );
        let m100 = parseFloat(document.getElementById("m100").value);
        let m5000_String = document.getElementById("m5000").value.split(":");
        let m5000 =
          parseFloat(m5000_String[0]) * 60 + parseFloat(m5000_String[1]);
        let flexibility = parseFloat(
          document.getElementById("flexibility").value
        );
        let gender = getRadioVal(
          document.getElementById("calculateForm"),
          "gender"
        );

        // set resultFormula to -1, if something goes wrong here your time will be -1
        let result2000 = -1;
        result2000 =
          219.367 +
          0.198 * m5000 +
          5.162 * m100 -
          0.539 * weight +
          0.308 * age -
          0.419 * arm_span;
        let result2000scull = 140.928 + 0.777 * result2000;

        // // You can uncomed the code below if you ever want to split on gender/have multiple formulas
        // // different formulas based on male/female/other
        // if (gender === "female") {
        //   //Insert formula when done
        //   resultFormula =
        //     weight + height + arm_span + leg_lenght + m100 + m5000 + flexibility;
        // } else if (gender === "male") {
        //   //Insert formula when done
        //   resultFormula =
        //     weight + height + arm_span + leg_lenght + m100 + m5000 + flexibility;
        // } else {
        //   //Insert formula when done
        //   resultFormula =
        //     weight + height + arm_span + leg_lenght + m100 + m5000 + flexibility;
        // }

let values = parseTime(result2000);
let valuesScull = parseTime(result2000scull);

        let finalResult = (document.getElementById("display").innerHTML =
          "Your estimated time for 2,000m ergometer is: " +
          values.hr+ values.min+ values.sec+ values.ms+
          "<br>\<br>\Predicted 2,000m single scull time: "+
          valuesScull.hr+ valuesScull.min+ valuesScull.sec+ valuesScull.ms);
      }

      function parseTime(TimeSeconds) {
        let hours = Number(Math.trunc(TimeSeconds / 3600, 0)) + " hour(s) and ";
        TimeSeconds = TimeSeconds % 3600;
        let minutes =
          Number(Math.trunc(TimeSeconds / 60, 0)) + " minute(s) and ";
        TimeSeconds = TimeSeconds % 60;
        let seconds = Number(Math.trunc(TimeSeconds, 0)) + " second(s) and ";
        TimeSeconds = TimeSeconds % 1;
        let miliSeconds =
          Number(Math.trunc(TimeSeconds * 1000, 0)) + " milisecond(s)";

        return {
          hr: hours,
          min: minutes,
          sec: seconds,
          ms: miliSeconds,
        };
      }

      //rounding function
      function round(num, dec) {
        const [sv, ev] = num.toString().split("e");
        return Number(
          Number(Math.round(parseFloat(sv + "e" + dec)) + "e-" + dec) +
            "e" +
            (ev || 0)
        );
      }

      //function to get the value of the male/female/other
      function getRadioVal(form, name) {
        var val;
        // get list of radio buttons with specified name
        var radios = form.elements[name];

        // loop through list of radio buttons
        for (var i = 0, len = radios.length; i < len; i++) {
          if (radios[i].checked) {
            // radio checked?
            val = radios[i].value; // if so, hold its value in val
            break; // and break out of for loop
          }
        }
        return val; // return value of checked radio or undefined if none checked
      }
    </script>
  </head>
  <body>
    <div class="container">
      <div class="fake"></div>
      <div class="itemsContainer">
        <h2>2,000m Rowing Ergometer Estimator</h2>
        <div class="form">
          <form id="calculateForm">
            <div>
              <label for="male"
                ><input type="radio" id="male" name="gender" value="male" />
                Male</label
              >

              <label for="female">
                <input type="radio" id="female" name="gender" value="female" />
                Female</label
              >

              <label for="other"
                ><input type="radio" id="other" name="gender" value="other" />
                Other</label
              >
            </div><label for="height">Age</label>
            <input
              type="number"
              placeholder="Age in years (example: 25)"
              name="message"
              id="user_Age"
              required
            />
            <label for="height">Height</label>
            <input
              type="number"
              placeholder="Height in cm (example: 175)"
              name="message"
              id="user_Height"
              required
            />
            <label for="weight">Weight</label>
            <input
              type="number"
              placeholder="Weight in kg (example: 75)"
              name="message"
              id="user_Weight"
              required
            />
            <label for="arm_span">Arm span</label>
            <input
              type="number"
              placeholder="Arm Span in cm (example: 175)"
              name="message"
              id="arm_span"
              required
            />
            <label for="leg_lenght">Leg lenght</label>
            <input
              type="number"
              placeholder="Leg lenght in cm (example: 130)"
              name="message"
              id="leg_lenght"
              required
            />
            <label for="m100">100m</label>
            <input
              type="number"
              placeholder="100m in seconds (example: 18.2)"
              name="message"
              id="m100"
              required
            />
            <label for="m5000">5000m</label>
            <input
              type="text"
              placeholder="5000m in m:s (example: 18:20)"
              name="message"
              id="m5000"
              required
            />
            <label for="flexibility">Flexibility </label>
            <input
              type="number"
              placeholder="Flexibility in rating/10"
              id="flexibility"
              required
            />
          </form>
          <input class="submit" type="submit" onclick="calculate();" /><br />
        </div>
        <p><span id="display"></span></p>
      </div>

      <div class="fake"></div>
    </div>
  </body>
</html>
